{% extends 'base.html' %} {% block content %} {% load static %}

<div
  class="hero-wrap hero-bread"
  style="background-image: url('images/bg_6.jpg')"
>
  <div class="container">
    <div
      class="row no-gutters slider-text align-items-center justify-content-center"
    >
      <div class="col-md-9 ftco-animate text-center">
        <p class="breadcrumbs">
          <span class="mr-2"><a href="index.html">Home</a></span>
          <span>Shop</span>
        </p>
        <h1 class="mb-0 bread">Shop</h1>
      </div>
    </div>
  </div>
</div>

<section class="ftco-section bg-light">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-lg-10 order-md-last">
        <div class="row">
			{% for product in products %}
          <div class="col-sm-12 col-md-12 col-lg-4 ftco-animate d-flex">
            <div class="product d-flex flex-column">
              <a href="{% url 'product_detail' product.id %}" class="img-prod"
                ><img
                  class="img-fluid"
                  src="{{ product.image_1.url }}"
                  alt="Colorlib Template"
                />
                <div class="overlay"></div>
              </a>
              <div class="text py-3 pb-4 px-3">
                <div class="d-flex">
                  <div class="cat">
                    <span>{{ product.subcategory }}</span>
                  </div>
                  <div class="rating">
                    <p class="text-right mb-0">
                      <a href="#"><span class="ion-ios-star-outline"></span></a>
                      <a href="#"><span class="ion-ios-star-outline"></span></a>
                      <a href="#"><span class="ion-ios-star-outline"></span></a>
                      <a href="#"><span class="ion-ios-star-outline"></span></a>
                      <a href="#"><span class="ion-ios-star-outline"></span></a>
                    </p>
                  </div>
                </div>
                <h3><a href="#">{{ product.name }}</a></h3>
                <div class="pricing">
                  <p class="price"><span>${{ product.price }}</span></p>
                </div>
                <p class="bottom-area d-flex px-3">
					<form id="add-to-cart-form" action="{% url 'add_to_cart' %}" method="post">
						{% csrf_token %}
						<input type="hidden" name="product_id" value="{{ product.id }}">
						<input type="hidden" name="quantity" value="1">
						<button type="submit" id="cart-button" ><a href="#" class="add-to-cart text-center py-2 mr-1"><span>Add to cart <i class="ion-ios-add ml-1"></i></span></a></button>
					</form>
				</p>
              </div>
            </div>
          </div>
		  {% endfor %}
        </div>
      </div>

      <div class="col-md-4 col-lg-2">
        <div class="sidebar">
          <div class="sidebar-box-2">
            <h2 class="heading">Categories</h2>
            <div class="fancy-collapse-panel">
              <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                {% for category in categories %}
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title">
                          <a href="{% url 'category_products' category.id %}"><a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">{{ category.category_name }}
                            </a></a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                        <div class="panel-body">
                            <ul>
                              {% for subcategory in category.subcategory_set.all %}
                              <li><a href="{% url 'subcategory_products' subcategory.id %}">{{ subcategory.subcategory_name }}</a></li>
                              {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                {% endfor %}
             </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}
