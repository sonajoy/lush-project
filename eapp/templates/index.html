{% extends 'base.html' %}

{% block content %}
{% load static %}
<section id="home-section" class="hero">
  <div class="home-slider owl-carousel">
    <div class="slider-item js-fullheight">
      <div class="overlay"></div>
      <div class="container-fluid p-0">
        <div class="row d-md-flex no-gutters slider-text align-items-center justify-content-end" data-scrollax-parent="true">
          <img class="one-third order-md-last img-fluid" src="{% static 'images/bg_1.jpeg' %}" alt="">
          <div class="one-forth d-flex align-items-center ftco-animate" data-scrollax=" properties: { translateY: '70%' }">
            <div class="text">
              <span class="subheading">#New Products</span>
              <div class="horizontal">
                <h1 class="mb-4 mt-3"> LUSH × SHREK</h1>
                <p class="mb-4">Welcome to the home of new at Lush. Here you'll find our freshest products – from limited edition exclusives to innovative creations and your next new favourites. Find everything to start your cosmetic revolution and shake up your bath time routine.</p>
                <p><a href="{% url 'product_list' %}" class="btn-custom">Discover Now</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="slider-item js-fullheight">
      <div class="overlay"></div>
      <div class="container-fluid p-0">
        <div class="row d-flex no-gutters slider-text align-items-center justify-content-end" data-scrollax-parent="true">
          <img class="one-third order-md-last img-fluid" src="{% static 'images/bg2.jpeg' %}" alt="">
          <div class="one-forth d-flex align-items-center ftco-animate" data-scrollax=" properties: { translateY: '70%' }">
            <div class="text">
              <span class="subheading">#New Products</span>
              <div class="horizontal">
                <h1 class="mb-4 mt-3">LUSH × SHREK</h1>
                <p class="mb-4">Welcome to the home of new at Lush. Here you'll find our freshest products – from limited edition exclusives to innovative creations and your next new favourites. Find everything to start your cosmetic revolution and shake up your bath time routine.</p>
                <p><a href="{% url 'product_list' %}" class="btn-custom">Discover Now</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="ftco-section bg-light">
  <div class="container">
    <div class="row justify-content-center mb-3 pb-3">
      <div class="col-md-12 heading-section text-center ftco-animate">
        <h2 class="mb-4">New Products</h2>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      {% for product in products %}
      <div class="col-sm-12 col-md-6 col-lg-3 ftco-animate d-flex">
        <div class="product d-flex flex-column">
          <a href="{% url 'product_detail' product.id %}" class="img-prod"><img class="img-fluid" src="{{ product.image_1.url }}" alt="Colorlib Template">
            <div class="overlay"></div>
          </a>
          <div class="text py-3 pb-4 px-3">
            <div class="d-flex">
              <div class="cat">
                <span>Bodycare</span>
              </div>
              <div class="rating">
                <p class="text-right mb-0">
                  <a href="#"><span class="ion-ios-star-outline"></span></a>
                  <a href="#"><span class="ion-ios-star-outline"></span></a>
                  <a href="#"><span class="ion-ios-star-outline"></span></a>
                  <a href="#"><span class="ion-ios-star-outline"></span></a>
                  <a href="#"><span class="ion-ios-star-outline"></span></a>
                </p>
              </div>
            </div>
            {% if product.quantity_in_stock == 0 %}
                                            <span class="stock-status" style="font-size: larger; color: brown;">Out of Stock</span>
                                        {% elif product.quantity_in_stock < product.reorder_level %}
                                            <span class="stock-status" style="font-size: larger; color: brown;">Limited Stock</span>
                                        {% endif %}
            <h3><a href="#">{{ product.name }}</a></h3>
            <div class="pricing">
              <p class="price"><span>{{ product.price }}</span></p>

            </div>
            {% if product.quantity_in_stock > 0 %}
            <p class="bottom-area d-flex px-3">
              <form id="add-to-cart-form" action="{% url 'add_to_cart' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ product.id }}">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" id="cart-button" ><a href="#" class="add-to-cart text-center py-2 mr-1"><span>Add to cart <i class="ion-ios-add ml-1"></i></span></a></button>
            </form>
            </p>
            {% endif %}
             
          </div>
        </div>
      </div>
      {% endfor %}
      <!-- Add remaining product sections here -->
    </div>
  </div>
</section>

{% endblock %}